const mobile_menu = document.getElementById('mobile_menu_container');
const search_area = document.getElementById('search_area');
search_area.style.display = "block";
mobile_menu.style.display = "block";

const app = Vue.createApp({
    data() {
        return {
            showSearch: false,
            showMobileMenu: false,
            showMobileDropdown: false,
        }
    },
    methods: {
        checkSearch(e) {
            if (this.showSearch === false) {
                e.preventDefault();
                return this.showSearch = true
            } else {
                e.preventDefault();
                this.showSearch = false
            }
        },
        checkMobileMenu(e) {
            if (this.showMobileMenu === false) {
                e.preventDefault();
                return this.showMobileMenu = true
            } else {
                e.preventDefault();
                this.showMobileMenu = false
            }
        },
        checkMobileDropdownMenu(e) {
            if (this.showMobileDropdown === false) {
                e.preventDefault();
                return this.showMobileDropdown = true;

            } else {
                e.preventDefault();
                this.showMobileDropdown = false
            }
        }
    },
}).mount('#app')



setTimeout(function(mobile_menu, search_area){
    //search_area.style.display = "block"
}, 3000);

if (document.querySelector('#homeStream' ) != null) {
    videojs(document.querySelector('#homeStream'), {
        controls: true,
        width: '100%',
        height: '100%',
    });
}

if (document.querySelector('#videoInPost' ) != null) {
    videojs(document.querySelector('#videoInPost'), {
        controls: true,
        width: '100%',
        height: '100%',
    });
}

/* SLIDE UP */
let slideUp = (target, duration=500) => {
    target.style.transitionProperty = 'height, margin, padding';
    target.style.transitionDuration = duration + 'ms';
    target.style.boxSizing = 'border-box';
    target.style.height = target.offsetHeight + 'px';
    target.offsetHeight;
    target.style.overflow = 'hidden';
    target.style.height = 0;
    target.style.paddingTop = 0;
    target.style.paddingBottom = 0;
    target.style.marginTop = 0;
    target.style.marginBottom = 0;
    window.setTimeout( () => {
        target.style.display = 'none';
        target.style.removeProperty('height');
        target.style.removeProperty('padding-top');
        target.style.removeProperty('padding-bottom');
        target.style.removeProperty('margin-top');
        target.style.removeProperty('margin-bottom');
        target.style.removeProperty('overflow');
        target.style.removeProperty('transition-duration');
        target.style.removeProperty('transition-property');
    }, duration);
}

/* SLIDE DOWN */
let slideDown = (target, duration=500) => {
    target.style.removeProperty('display');
    let display = window.getComputedStyle(target).display;

    if (display === 'none') {
        display = 'block'
    }
    target.style.display = display;
    let height = target.offsetHeight;
    target.style.overflow = 'hidden';
    target.style.height = 0;
    target.style.paddingTop = 0;
    target.style.paddingBottom = 0;
    target.style.marginTop = 0;
    target.style.marginBottom = 0;
    target.offsetHeight;
    target.style.boxSizing = 'border-box';
    target.style.transitionProperty = "height, margin, padding";
    target.style.transitionDuration = duration + 'ms';
    target.style.height = height + 'px';
    target.style.removeProperty('padding-top');
    target.style.removeProperty('padding-bottom');
    target.style.removeProperty('margin-top');
    target.style.removeProperty('margin-bottom');
    window.setTimeout( () => {
        target.style.removeProperty('height');
        target.style.removeProperty('overflow');
        target.style.removeProperty('transition-duration');
        target.style.removeProperty('transition-property');
    }, duration);
}

/* TOOGLE */
var slideToggle = (target, duration = 500) => {
    if (window.getComputedStyle(target).display === 'none') {
        return slideDown(target, duration);
    } else {
        return slideUp(target, duration);
    }
}

function copyShortLink(){
    var copylink = document.querySelector("#postShortLink");
    var shortLink = copylink.href
    document.addEventListener('copy', function(e) {
        e.clipboardData.setData('text/plain', shortLink);
        e.preventDefault();
    }, true);
    document.execCommand("copy");
    alert("تم نسخ الرابط: " + shortLink);
}

if (document.querySelector('#postShortLink') != null) {
    document.getElementById("postShortLink").addEventListener("click", function(event){
        event.preventDefault();
        copyShortLink();
    });
}

if (document.querySelector('#hero-slider') != null ) {
    document.addEventListener( 'DOMContentLoaded', function () {
        new Splide( '#hero-slider', {
            type: 'loop',
            perPage: 1,
            gap: 0,
            autoplay: true,
            direction  : 'rtl',
            heightRatio: 0.6,
            arrows: false,
        } ).mount();
    } );
}

if (document.querySelector('#stream-ads_slider') != null ) {
    document.addEventListener( 'DOMContentLoaded', function () {
        new Splide( '#stream-ads_slider', {
            type: 'loop',
            perPage: 1,
            gap: 0,
            autoplay: true,
            direction  : 'rtl',
            heightRatio: 0.6,
            arrows: false,
            pagination: false
        } ).mount();
    } );
}

// Lazy Loading Images
const images = document.querySelectorAll("[data-src]");
const imgOptions = {
    threshold: 0.3,
    rootMargin: "0px 0px 0px 0px"
}
function preloadImage(img){
    const src = img.getAttribute('data-src');
    if (!src){
        return;
    }
    img.src = src
}
const imgObserver = new IntersectionObserver((entries, imgObserver) => {
    entries.forEach(entry => {
        if(!entry.isIntersecting) {
            return;
        } else {
            preloadImage(entry.target)
            imgObserver.unobserve(entry.target)
        }
    })
}, imgOptions)
images.forEach(image => {
    imgObserver.observe(image);
})





//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9iaWxlX21lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9iaWxlX21lbnVfY29udGFpbmVyJyk7XHJcbmNvbnN0IHNlYXJjaF9hcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaF9hcmVhJyk7XHJcbnNlYXJjaF9hcmVhLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbm1vYmlsZV9tZW51LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcblxyXG5jb25zdCBhcHAgPSBWdWUuY3JlYXRlQXBwKHtcclxuICAgIGRhdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2hvd1NlYXJjaDogZmFsc2UsXHJcbiAgICAgICAgICAgIHNob3dNb2JpbGVNZW51OiBmYWxzZSxcclxuICAgICAgICAgICAgc2hvd01vYmlsZURyb3Bkb3duOiBmYWxzZSxcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgbWV0aG9kczoge1xyXG4gICAgICAgIGNoZWNrU2VhcmNoKGUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd1NlYXJjaCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNob3dTZWFyY2ggPSB0cnVlXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dTZWFyY2ggPSBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjaGVja01vYmlsZU1lbnUoZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaG93TW9iaWxlTWVudSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNob3dNb2JpbGVNZW51ID0gdHJ1ZVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93TW9iaWxlTWVudSA9IGZhbHNlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGNoZWNrTW9iaWxlRHJvcGRvd25NZW51KGUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd01vYmlsZURyb3Bkb3duID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2hvd01vYmlsZURyb3Bkb3duID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dNb2JpbGVEcm9wZG93biA9IGZhbHNlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG59KS5tb3VudCgnI2FwcCcpXHJcblxyXG5cclxuXHJcbnNldFRpbWVvdXQoZnVuY3Rpb24obW9iaWxlX21lbnUsIHNlYXJjaF9hcmVhKXtcclxuICAgIC8vc2VhcmNoX2FyZWEuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIlxyXG59LCAzMDAwKTtcclxuXHJcbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaG9tZVN0cmVhbScgKSAhPSBudWxsKSB7XHJcbiAgICB2aWRlb2pzKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNob21lU3RyZWFtJyksIHtcclxuICAgICAgICBjb250cm9sczogdHJ1ZSxcclxuICAgICAgICB3aWR0aDogJzEwMCUnLFxyXG4gICAgICAgIGhlaWdodDogJzEwMCUnLFxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdmlkZW9JblBvc3QnICkgIT0gbnVsbCkge1xyXG4gICAgdmlkZW9qcyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdmlkZW9JblBvc3QnKSwge1xyXG4gICAgICAgIGNvbnRyb2xzOiB0cnVlLFxyXG4gICAgICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICAgICAgaGVpZ2h0OiAnMTAwJScsXHJcbiAgICB9KTtcclxufVxyXG5cclxuLyogU0xJREUgVVAgKi9cclxubGV0IHNsaWRlVXAgPSAodGFyZ2V0LCBkdXJhdGlvbj01MDApID0+IHtcclxuICAgIHRhcmdldC5zdHlsZS50cmFuc2l0aW9uUHJvcGVydHkgPSAnaGVpZ2h0LCBtYXJnaW4sIHBhZGRpbmcnO1xyXG4gICAgdGFyZ2V0LnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IGR1cmF0aW9uICsgJ21zJztcclxuICAgIHRhcmdldC5zdHlsZS5ib3hTaXppbmcgPSAnYm9yZGVyLWJveCc7XHJcbiAgICB0YXJnZXQuc3R5bGUuaGVpZ2h0ID0gdGFyZ2V0Lm9mZnNldEhlaWdodCArICdweCc7XHJcbiAgICB0YXJnZXQub2Zmc2V0SGVpZ2h0O1xyXG4gICAgdGFyZ2V0LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XHJcbiAgICB0YXJnZXQuc3R5bGUuaGVpZ2h0ID0gMDtcclxuICAgIHRhcmdldC5zdHlsZS5wYWRkaW5nVG9wID0gMDtcclxuICAgIHRhcmdldC5zdHlsZS5wYWRkaW5nQm90dG9tID0gMDtcclxuICAgIHRhcmdldC5zdHlsZS5tYXJnaW5Ub3AgPSAwO1xyXG4gICAgdGFyZ2V0LnN0eWxlLm1hcmdpbkJvdHRvbSA9IDA7XHJcbiAgICB3aW5kb3cuc2V0VGltZW91dCggKCkgPT4ge1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnaGVpZ2h0Jyk7XHJcbiAgICAgICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdwYWRkaW5nLXRvcCcpO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgncGFkZGluZy1ib3R0b20nKTtcclxuICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ21hcmdpbi10b3AnKTtcclxuICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ21hcmdpbi1ib3R0b20nKTtcclxuICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ292ZXJmbG93Jyk7XHJcbiAgICAgICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCd0cmFuc2l0aW9uLWR1cmF0aW9uJyk7XHJcbiAgICAgICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCd0cmFuc2l0aW9uLXByb3BlcnR5Jyk7XHJcbiAgICB9LCBkdXJhdGlvbik7XHJcbn1cclxuXHJcbi8qIFNMSURFIERPV04gKi9cclxubGV0IHNsaWRlRG93biA9ICh0YXJnZXQsIGR1cmF0aW9uPTUwMCkgPT4ge1xyXG4gICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdkaXNwbGF5Jyk7XHJcbiAgICBsZXQgZGlzcGxheSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRhcmdldCkuZGlzcGxheTtcclxuXHJcbiAgICBpZiAoZGlzcGxheSA9PT0gJ25vbmUnKSB7XHJcbiAgICAgICAgZGlzcGxheSA9ICdibG9jaydcclxuICAgIH1cclxuICAgIHRhcmdldC5zdHlsZS5kaXNwbGF5ID0gZGlzcGxheTtcclxuICAgIGxldCBoZWlnaHQgPSB0YXJnZXQub2Zmc2V0SGVpZ2h0O1xyXG4gICAgdGFyZ2V0LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XHJcbiAgICB0YXJnZXQuc3R5bGUuaGVpZ2h0ID0gMDtcclxuICAgIHRhcmdldC5zdHlsZS5wYWRkaW5nVG9wID0gMDtcclxuICAgIHRhcmdldC5zdHlsZS5wYWRkaW5nQm90dG9tID0gMDtcclxuICAgIHRhcmdldC5zdHlsZS5tYXJnaW5Ub3AgPSAwO1xyXG4gICAgdGFyZ2V0LnN0eWxlLm1hcmdpbkJvdHRvbSA9IDA7XHJcbiAgICB0YXJnZXQub2Zmc2V0SGVpZ2h0O1xyXG4gICAgdGFyZ2V0LnN0eWxlLmJveFNpemluZyA9ICdib3JkZXItYm94JztcclxuICAgIHRhcmdldC5zdHlsZS50cmFuc2l0aW9uUHJvcGVydHkgPSBcImhlaWdodCwgbWFyZ2luLCBwYWRkaW5nXCI7XHJcbiAgICB0YXJnZXQuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gZHVyYXRpb24gKyAnbXMnO1xyXG4gICAgdGFyZ2V0LnN0eWxlLmhlaWdodCA9IGhlaWdodCArICdweCc7XHJcbiAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3BhZGRpbmctdG9wJyk7XHJcbiAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3BhZGRpbmctYm90dG9tJyk7XHJcbiAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ21hcmdpbi10b3AnKTtcclxuICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnbWFyZ2luLWJvdHRvbScpO1xyXG4gICAgd2luZG93LnNldFRpbWVvdXQoICgpID0+IHtcclxuICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2hlaWdodCcpO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnb3ZlcmZsb3cnKTtcclxuICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3RyYW5zaXRpb24tZHVyYXRpb24nKTtcclxuICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3RyYW5zaXRpb24tcHJvcGVydHknKTtcclxuICAgIH0sIGR1cmF0aW9uKTtcclxufVxyXG5cclxuLyogVE9PR0xFICovXHJcbnZhciBzbGlkZVRvZ2dsZSA9ICh0YXJnZXQsIGR1cmF0aW9uID0gNTAwKSA9PiB7XHJcbiAgICBpZiAod2luZG93LmdldENvbXB1dGVkU3R5bGUodGFyZ2V0KS5kaXNwbGF5ID09PSAnbm9uZScpIHtcclxuICAgICAgICByZXR1cm4gc2xpZGVEb3duKHRhcmdldCwgZHVyYXRpb24pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gc2xpZGVVcCh0YXJnZXQsIGR1cmF0aW9uKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY29weVNob3J0TGluaygpe1xyXG4gICAgdmFyIGNvcHlsaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3N0U2hvcnRMaW5rXCIpO1xyXG4gICAgdmFyIHNob3J0TGluayA9IGNvcHlsaW5rLmhyZWZcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NvcHknLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZS5jbGlwYm9hcmREYXRhLnNldERhdGEoJ3RleHQvcGxhaW4nLCBzaG9ydExpbmspO1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0sIHRydWUpO1xyXG4gICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoXCJjb3B5XCIpO1xyXG4gICAgYWxlcnQoXCLYqtmFINmG2LPYriDYp9mE2LHYp9io2Lc6IFwiICsgc2hvcnRMaW5rKTtcclxufVxyXG5cclxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwb3N0U2hvcnRMaW5rJykgIT0gbnVsbCkge1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwb3N0U2hvcnRMaW5rXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBjb3B5U2hvcnRMaW5rKCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNoZXJvLXNsaWRlcicpICE9IG51bGwgKSB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCAnRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBuZXcgU3BsaWRlKCAnI2hlcm8tc2xpZGVyJywge1xyXG4gICAgICAgICAgICB0eXBlOiAnbG9vcCcsXHJcbiAgICAgICAgICAgIHBlclBhZ2U6IDEsXHJcbiAgICAgICAgICAgIGdhcDogMCxcclxuICAgICAgICAgICAgYXV0b3BsYXk6IHRydWUsXHJcbiAgICAgICAgICAgIGRpcmVjdGlvbiAgOiAncnRsJyxcclxuICAgICAgICAgICAgaGVpZ2h0UmF0aW86IDAuNixcclxuICAgICAgICAgICAgYXJyb3dzOiBmYWxzZSxcclxuICAgICAgICB9ICkubW91bnQoKTtcclxuICAgIH0gKTtcclxufVxyXG5cclxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzdHJlYW0tYWRzX3NsaWRlcicpICE9IG51bGwgKSB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCAnRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBuZXcgU3BsaWRlKCAnI3N0cmVhbS1hZHNfc2xpZGVyJywge1xyXG4gICAgICAgICAgICB0eXBlOiAnbG9vcCcsXHJcbiAgICAgICAgICAgIHBlclBhZ2U6IDEsXHJcbiAgICAgICAgICAgIGdhcDogMCxcclxuICAgICAgICAgICAgYXV0b3BsYXk6IHRydWUsXHJcbiAgICAgICAgICAgIGRpcmVjdGlvbiAgOiAncnRsJyxcclxuICAgICAgICAgICAgaGVpZ2h0UmF0aW86IDAuNixcclxuICAgICAgICAgICAgYXJyb3dzOiBmYWxzZSxcclxuICAgICAgICAgICAgcGFnaW5hdGlvbjogZmFsc2VcclxuICAgICAgICB9ICkubW91bnQoKTtcclxuICAgIH0gKTtcclxufVxyXG5cclxuLy8gTGF6eSBMb2FkaW5nIEltYWdlc1xyXG5jb25zdCBpbWFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtc3JjXVwiKTtcclxuY29uc3QgaW1nT3B0aW9ucyA9IHtcclxuICAgIHRocmVzaG9sZDogMC4zLFxyXG4gICAgcm9vdE1hcmdpbjogXCIwcHggMHB4IDBweCAwcHhcIlxyXG59XHJcbmZ1bmN0aW9uIHByZWxvYWRJbWFnZShpbWcpe1xyXG4gICAgY29uc3Qgc3JjID0gaW1nLmdldEF0dHJpYnV0ZSgnZGF0YS1zcmMnKTtcclxuICAgIGlmICghc3JjKXtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpbWcuc3JjID0gc3JjXHJcbn1cclxuY29uc3QgaW1nT2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoKGVudHJpZXMsIGltZ09ic2VydmVyKSA9PiB7XHJcbiAgICBlbnRyaWVzLmZvckVhY2goZW50cnkgPT4ge1xyXG4gICAgICAgIGlmKCFlbnRyeS5pc0ludGVyc2VjdGluZykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcHJlbG9hZEltYWdlKGVudHJ5LnRhcmdldClcclxuICAgICAgICAgICAgaW1nT2JzZXJ2ZXIudW5vYnNlcnZlKGVudHJ5LnRhcmdldClcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59LCBpbWdPcHRpb25zKVxyXG5pbWFnZXMuZm9yRWFjaChpbWFnZSA9PiB7XHJcbiAgICBpbWdPYnNlcnZlci5vYnNlcnZlKGltYWdlKTtcclxufSlcclxuXHJcblxyXG5cclxuXHJcblxyXG4iXX0=
