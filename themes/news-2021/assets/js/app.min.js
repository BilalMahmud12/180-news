const mobile_menu = document.getElementById('mobile_menu_container');
const search_area = document.getElementById('search_area');
search_area.style.display = "block";
mobile_menu.style.display = "block";

const app = Vue.createApp({
    data() {
        return {
            showSearch: false,
            showMobileMenu: false,
            showMobileDropdown: false,
        }
    },
    methods: {
        checkSearch(e) {
            if (this.showSearch === false) {
                e.preventDefault();
                return this.showSearch = true
            } else {
                e.preventDefault();
                this.showSearch = false
            }
        },
        checkMobileMenu(e) {
            if (this.showMobileMenu === false) {
                e.preventDefault();
                return this.showMobileMenu = true
            } else {
                e.preventDefault();
                this.showMobileMenu = false
            }
        },
        checkMobileDropdownMenu(e) {
            if (this.showMobileDropdown === false) {
                e.preventDefault();
                return this.showMobileDropdown = true;

            } else {
                e.preventDefault();
                this.showMobileDropdown = false
            }
        }
    },
}).mount('#app')



setTimeout(function(mobile_menu, search_area){
    //search_area.style.display = "block"
}, 3000);

if (document.querySelector('#homeStream' ) != null) {
    videojs(document.querySelector('#homeStream'), {
        controls: true,
        width: '100%',
        height: '100%',
    });
}

if (document.querySelector('#VideoPageStream' ) != null) {
    videojs(document.querySelector('#VideoPageStream'), {
        controls: true,
        width: '100%',
        height: '100%',
    });
}

if (document.querySelector('#videoInPost' ) != null) {
    videojs(document.querySelector('#videoInPost'), {
        controls: true,
        width: '100%',
        height: '100%',
    });
}

/* SLIDE UP */
let slideUp = (target, duration=500) => {
    target.style.transitionProperty = 'height, margin, padding';
    target.style.transitionDuration = duration + 'ms';
    target.style.boxSizing = 'border-box';
    target.style.height = target.offsetHeight + 'px';
    target.offsetHeight;
    target.style.overflow = 'hidden';
    target.style.height = 0;
    target.style.paddingTop = 0;
    target.style.paddingBottom = 0;
    target.style.marginTop = 0;
    target.style.marginBottom = 0;
    window.setTimeout( () => {
        target.style.display = 'none';
        target.style.removeProperty('height');
        target.style.removeProperty('padding-top');
        target.style.removeProperty('padding-bottom');
        target.style.removeProperty('margin-top');
        target.style.removeProperty('margin-bottom');
        target.style.removeProperty('overflow');
        target.style.removeProperty('transition-duration');
        target.style.removeProperty('transition-property');
    }, duration);
}

/* SLIDE DOWN */
let slideDown = (target, duration=500) => {
    target.style.removeProperty('display');
    let display = window.getComputedStyle(target).display;

    if (display === 'none') {
        display = 'block'
    }
    target.style.display = display;
    let height = target.offsetHeight;
    target.style.overflow = 'hidden';
    target.style.height = 0;
    target.style.paddingTop = 0;
    target.style.paddingBottom = 0;
    target.style.marginTop = 0;
    target.style.marginBottom = 0;
    target.offsetHeight;
    target.style.boxSizing = 'border-box';
    target.style.transitionProperty = "height, margin, padding";
    target.style.transitionDuration = duration + 'ms';
    target.style.height = height + 'px';
    target.style.removeProperty('padding-top');
    target.style.removeProperty('padding-bottom');
    target.style.removeProperty('margin-top');
    target.style.removeProperty('margin-bottom');
    window.setTimeout( () => {
        target.style.removeProperty('height');
        target.style.removeProperty('overflow');
        target.style.removeProperty('transition-duration');
        target.style.removeProperty('transition-property');
    }, duration);
}

/* TOOGLE */
var slideToggle = (target, duration = 500) => {
    if (window.getComputedStyle(target).display === 'none') {
        return slideDown(target, duration);
    } else {
        return slideUp(target, duration);
    }
}

function copyShortLink(){
    var copylink = document.querySelector("#postShortLink");
    var shortLink = copylink.href
    document.addEventListener('copy', function(e) {
        e.clipboardData.setData('text/plain', shortLink);
        e.preventDefault();
    }, true);
    document.execCommand("copy");
    alert("تم نسخ الرابط: " + shortLink);
}

if (document.querySelector('#postShortLink') != null) {
    document.getElementById("postShortLink").addEventListener("click", function(event){
        event.preventDefault();
        copyShortLink();
    });
}

if (document.querySelector('#hero-slider') != null ) {
    document.addEventListener( 'DOMContentLoaded', function () {
        new Splide( '#hero-slider', {
            type: 'loop',
            perPage: 1,
            gap: 0,
            autoplay: true,
            direction  : 'rtl',
            heightRatio: 0.6,
            arrows: false,
        } ).mount();
    } );
}

if (document.querySelector('#stream-ads_slider') != null ) {
    document.addEventListener( 'DOMContentLoaded', function () {
        new Splide( '#stream-ads_slider', {
            type: 'loop',
            perPage: 1,
            gap: 0,
            autoplay: true,
            direction  : 'rtl',
            heightRatio: 0.6,
            arrows: false,
            pagination: false
        } ).mount();
    } );
}

// Lazy Loading Images
const images = document.querySelectorAll("[data-src]");
const imgOptions = {
    threshold: 0.3,
    rootMargin: "0px 0px 0px 0px"
}
function preloadImage(img){
    const src = img.getAttribute('data-src');
    if (!src){
        return;
    }
    img.src = src
}
const imgObserver = new IntersectionObserver((entries, imgObserver) => {
    entries.forEach(entry => {
        if(!entry.isIntersecting) {
            return;
        } else {
            preloadImage(entry.target)
            imgObserver.unobserve(entry.target)
        }
    })
}, imgOptions)
images.forEach(image => {
    imgObserver.observe(image);
})





//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vYmlsZV9tZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vYmlsZV9tZW51X2NvbnRhaW5lcicpO1xyXG5jb25zdCBzZWFyY2hfYXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2hfYXJlYScpO1xyXG5zZWFyY2hfYXJlYS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG5tb2JpbGVfbWVudS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG5cclxuY29uc3QgYXBwID0gVnVlLmNyZWF0ZUFwcCh7XHJcbiAgICBkYXRhKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNob3dTZWFyY2g6IGZhbHNlLFxyXG4gICAgICAgICAgICBzaG93TW9iaWxlTWVudTogZmFsc2UsXHJcbiAgICAgICAgICAgIHNob3dNb2JpbGVEcm9wZG93bjogZmFsc2UsXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIG1ldGhvZHM6IHtcclxuICAgICAgICBjaGVja1NlYXJjaChlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dTZWFyY2ggPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zaG93U2VhcmNoID0gdHJ1ZVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93U2VhcmNoID0gZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2hlY2tNb2JpbGVNZW51KGUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd01vYmlsZU1lbnUgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zaG93TW9iaWxlTWVudSA9IHRydWVcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd01vYmlsZU1lbnUgPSBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjaGVja01vYmlsZURyb3Bkb3duTWVudShlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dNb2JpbGVEcm9wZG93biA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNob3dNb2JpbGVEcm9wZG93biA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93TW9iaWxlRHJvcGRvd24gPSBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxufSkubW91bnQoJyNhcHAnKVxyXG5cclxuXHJcblxyXG5zZXRUaW1lb3V0KGZ1bmN0aW9uKG1vYmlsZV9tZW51LCBzZWFyY2hfYXJlYSl7XHJcbiAgICAvL3NlYXJjaF9hcmVhLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCJcclxufSwgMzAwMCk7XHJcblxyXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2hvbWVTdHJlYW0nICkgIT0gbnVsbCkge1xyXG4gICAgdmlkZW9qcyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaG9tZVN0cmVhbScpLCB7XHJcbiAgICAgICAgY29udHJvbHM6IHRydWUsXHJcbiAgICAgICAgd2lkdGg6ICcxMDAlJyxcclxuICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcclxuICAgIH0pO1xyXG59XHJcblxyXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI1ZpZGVvUGFnZVN0cmVhbScgKSAhPSBudWxsKSB7XHJcbiAgICB2aWRlb2pzKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNWaWRlb1BhZ2VTdHJlYW0nKSwge1xyXG4gICAgICAgIGNvbnRyb2xzOiB0cnVlLFxyXG4gICAgICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICAgICAgaGVpZ2h0OiAnMTAwJScsXHJcbiAgICB9KTtcclxufVxyXG5cclxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN2aWRlb0luUG9zdCcgKSAhPSBudWxsKSB7XHJcbiAgICB2aWRlb2pzKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN2aWRlb0luUG9zdCcpLCB7XHJcbiAgICAgICAgY29udHJvbHM6IHRydWUsXHJcbiAgICAgICAgd2lkdGg6ICcxMDAlJyxcclxuICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcclxuICAgIH0pO1xyXG59XHJcblxyXG4vKiBTTElERSBVUCAqL1xyXG5sZXQgc2xpZGVVcCA9ICh0YXJnZXQsIGR1cmF0aW9uPTUwMCkgPT4ge1xyXG4gICAgdGFyZ2V0LnN0eWxlLnRyYW5zaXRpb25Qcm9wZXJ0eSA9ICdoZWlnaHQsIG1hcmdpbiwgcGFkZGluZyc7XHJcbiAgICB0YXJnZXQuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gZHVyYXRpb24gKyAnbXMnO1xyXG4gICAgdGFyZ2V0LnN0eWxlLmJveFNpemluZyA9ICdib3JkZXItYm94JztcclxuICAgIHRhcmdldC5zdHlsZS5oZWlnaHQgPSB0YXJnZXQub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcclxuICAgIHRhcmdldC5vZmZzZXRIZWlnaHQ7XHJcbiAgICB0YXJnZXQuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcclxuICAgIHRhcmdldC5zdHlsZS5oZWlnaHQgPSAwO1xyXG4gICAgdGFyZ2V0LnN0eWxlLnBhZGRpbmdUb3AgPSAwO1xyXG4gICAgdGFyZ2V0LnN0eWxlLnBhZGRpbmdCb3R0b20gPSAwO1xyXG4gICAgdGFyZ2V0LnN0eWxlLm1hcmdpblRvcCA9IDA7XHJcbiAgICB0YXJnZXQuc3R5bGUubWFyZ2luQm90dG9tID0gMDtcclxuICAgIHdpbmRvdy5zZXRUaW1lb3V0KCAoKSA9PiB7XHJcbiAgICAgICAgdGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdoZWlnaHQnKTtcclxuICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3BhZGRpbmctdG9wJyk7XHJcbiAgICAgICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdwYWRkaW5nLWJvdHRvbScpO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnbWFyZ2luLXRvcCcpO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnbWFyZ2luLWJvdHRvbScpO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnb3ZlcmZsb3cnKTtcclxuICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3RyYW5zaXRpb24tZHVyYXRpb24nKTtcclxuICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3RyYW5zaXRpb24tcHJvcGVydHknKTtcclxuICAgIH0sIGR1cmF0aW9uKTtcclxufVxyXG5cclxuLyogU0xJREUgRE9XTiAqL1xyXG5sZXQgc2xpZGVEb3duID0gKHRhcmdldCwgZHVyYXRpb249NTAwKSA9PiB7XHJcbiAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2Rpc3BsYXknKTtcclxuICAgIGxldCBkaXNwbGF5ID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGFyZ2V0KS5kaXNwbGF5O1xyXG5cclxuICAgIGlmIChkaXNwbGF5ID09PSAnbm9uZScpIHtcclxuICAgICAgICBkaXNwbGF5ID0gJ2Jsb2NrJ1xyXG4gICAgfVxyXG4gICAgdGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5O1xyXG4gICAgbGV0IGhlaWdodCA9IHRhcmdldC5vZmZzZXRIZWlnaHQ7XHJcbiAgICB0YXJnZXQuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcclxuICAgIHRhcmdldC5zdHlsZS5oZWlnaHQgPSAwO1xyXG4gICAgdGFyZ2V0LnN0eWxlLnBhZGRpbmdUb3AgPSAwO1xyXG4gICAgdGFyZ2V0LnN0eWxlLnBhZGRpbmdCb3R0b20gPSAwO1xyXG4gICAgdGFyZ2V0LnN0eWxlLm1hcmdpblRvcCA9IDA7XHJcbiAgICB0YXJnZXQuc3R5bGUubWFyZ2luQm90dG9tID0gMDtcclxuICAgIHRhcmdldC5vZmZzZXRIZWlnaHQ7XHJcbiAgICB0YXJnZXQuc3R5bGUuYm94U2l6aW5nID0gJ2JvcmRlci1ib3gnO1xyXG4gICAgdGFyZ2V0LnN0eWxlLnRyYW5zaXRpb25Qcm9wZXJ0eSA9IFwiaGVpZ2h0LCBtYXJnaW4sIHBhZGRpbmdcIjtcclxuICAgIHRhcmdldC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBkdXJhdGlvbiArICdtcyc7XHJcbiAgICB0YXJnZXQuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgJ3B4JztcclxuICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgncGFkZGluZy10b3AnKTtcclxuICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgncGFkZGluZy1ib3R0b20nKTtcclxuICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnbWFyZ2luLXRvcCcpO1xyXG4gICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdtYXJnaW4tYm90dG9tJyk7XHJcbiAgICB3aW5kb3cuc2V0VGltZW91dCggKCkgPT4ge1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnaGVpZ2h0Jyk7XHJcbiAgICAgICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdvdmVyZmxvdycpO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgndHJhbnNpdGlvbi1kdXJhdGlvbicpO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgndHJhbnNpdGlvbi1wcm9wZXJ0eScpO1xyXG4gICAgfSwgZHVyYXRpb24pO1xyXG59XHJcblxyXG4vKiBUT09HTEUgKi9cclxudmFyIHNsaWRlVG9nZ2xlID0gKHRhcmdldCwgZHVyYXRpb24gPSA1MDApID0+IHtcclxuICAgIGlmICh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXQpLmRpc3BsYXkgPT09ICdub25lJykge1xyXG4gICAgICAgIHJldHVybiBzbGlkZURvd24odGFyZ2V0LCBkdXJhdGlvbik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBzbGlkZVVwKHRhcmdldCwgZHVyYXRpb24pO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjb3B5U2hvcnRMaW5rKCl7XHJcbiAgICB2YXIgY29weWxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Bvc3RTaG9ydExpbmtcIik7XHJcbiAgICB2YXIgc2hvcnRMaW5rID0gY29weWxpbmsuaHJlZlxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY29weScsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBlLmNsaXBib2FyZERhdGEuc2V0RGF0YSgndGV4dC9wbGFpbicsIHNob3J0TGluayk7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSwgdHJ1ZSk7XHJcbiAgICBkb2N1bWVudC5leGVjQ29tbWFuZChcImNvcHlcIik7XHJcbiAgICBhbGVydChcItiq2YUg2YbYs9iuINin2YTYsdin2KjYtzogXCIgKyBzaG9ydExpbmspO1xyXG59XHJcblxyXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Bvc3RTaG9ydExpbmsnKSAhPSBudWxsKSB7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBvc3RTaG9ydExpbmtcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGNvcHlTaG9ydExpbmsoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2hlcm8tc2xpZGVyJykgIT0gbnVsbCApIHtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIG5ldyBTcGxpZGUoICcjaGVyby1zbGlkZXInLCB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdsb29wJyxcclxuICAgICAgICAgICAgcGVyUGFnZTogMSxcclxuICAgICAgICAgICAgZ2FwOiAwLFxyXG4gICAgICAgICAgICBhdXRvcGxheTogdHJ1ZSxcclxuICAgICAgICAgICAgZGlyZWN0aW9uICA6ICdydGwnLFxyXG4gICAgICAgICAgICBoZWlnaHRSYXRpbzogMC42LFxyXG4gICAgICAgICAgICBhcnJvd3M6IGZhbHNlLFxyXG4gICAgICAgIH0gKS5tb3VudCgpO1xyXG4gICAgfSApO1xyXG59XHJcblxyXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3N0cmVhbS1hZHNfc2xpZGVyJykgIT0gbnVsbCApIHtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIG5ldyBTcGxpZGUoICcjc3RyZWFtLWFkc19zbGlkZXInLCB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdsb29wJyxcclxuICAgICAgICAgICAgcGVyUGFnZTogMSxcclxuICAgICAgICAgICAgZ2FwOiAwLFxyXG4gICAgICAgICAgICBhdXRvcGxheTogdHJ1ZSxcclxuICAgICAgICAgICAgZGlyZWN0aW9uICA6ICdydGwnLFxyXG4gICAgICAgICAgICBoZWlnaHRSYXRpbzogMC42LFxyXG4gICAgICAgICAgICBhcnJvd3M6IGZhbHNlLFxyXG4gICAgICAgICAgICBwYWdpbmF0aW9uOiBmYWxzZVxyXG4gICAgICAgIH0gKS5tb3VudCgpO1xyXG4gICAgfSApO1xyXG59XHJcblxyXG4vLyBMYXp5IExvYWRpbmcgSW1hZ2VzXHJcbmNvbnN0IGltYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1zcmNdXCIpO1xyXG5jb25zdCBpbWdPcHRpb25zID0ge1xyXG4gICAgdGhyZXNob2xkOiAwLjMsXHJcbiAgICByb290TWFyZ2luOiBcIjBweCAwcHggMHB4IDBweFwiXHJcbn1cclxuZnVuY3Rpb24gcHJlbG9hZEltYWdlKGltZyl7XHJcbiAgICBjb25zdCBzcmMgPSBpbWcuZ2V0QXR0cmlidXRlKCdkYXRhLXNyYycpO1xyXG4gICAgaWYgKCFzcmMpe1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGltZy5zcmMgPSBzcmNcclxufVxyXG5jb25zdCBpbWdPYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcigoZW50cmllcywgaW1nT2JzZXJ2ZXIpID0+IHtcclxuICAgIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XHJcbiAgICAgICAgaWYoIWVudHJ5LmlzSW50ZXJzZWN0aW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwcmVsb2FkSW1hZ2UoZW50cnkudGFyZ2V0KVxyXG4gICAgICAgICAgICBpbWdPYnNlcnZlci51bm9ic2VydmUoZW50cnkudGFyZ2V0KVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn0sIGltZ09wdGlvbnMpXHJcbmltYWdlcy5mb3JFYWNoKGltYWdlID0+IHtcclxuICAgIGltZ09ic2VydmVyLm9ic2VydmUoaW1hZ2UpO1xyXG59KVxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdfQ==
