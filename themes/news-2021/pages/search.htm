title = "search"
url = "/search"
layout = "default"
is_hidden = 0

==
<?php
use Illuminate\Database\Eloquent\Builder;
use Midorsoft\Publish\Models\Article;
function onStart()
{
    $url = parse_url($_SERVER['REQUEST_URI']);
    $segments = parse_url($_SERVER['REQUEST_URI'], PHP_URL_QUERY);

    $query = str_split($segments);
    $filtered = array_splice($query, 2);
    $searchTerm = urldecode(implode($filtered));
    $this['searchTerm'] = $searchTerm;
    $this['search'] = Article::query()
    ->whereLike('title', $searchTerm)
    ->whereLike('content', $searchTerm)
    ->orderBy('created_at', 'desc')->get();
}
?>
==
<article id="search-results">
    <div class="wrapper">
        <div class="category-title-area">
            <div class="overlay"></div>
            <div class="category-bg"><img src="{{ 'assets/images/search-results.jpg'|theme }}" alt="180-news-search-results"></div>
            <div class="title"><span>   نتائج البحث عن:</span>
                <h1><span>   " {{ searchTerm }} "</span></h1>
                <p><span> عدد النتائج :</span><span> {{ search.count }}</span></p>
            </div>
        </div>
        <div class="page-grid">
            <div class="search-results">
                <ul class="post-results--list">
                    {% for post in search %}
                    <li class="post-result-list--item">
                        <div class="content"><a class="category" href="{{ 'posts-index'|page({ category: post.category.slug }) }}">{{ post.category.name }}</a>
                            <a class="title" href="{{ 'post-single'|page ({ date: post.created_at|strftime('%d-%m-%Y')  ,slug: post.slug }) }}">
                            <h2>{{ post.title }}</h2></a>
                        </div>
                    </li>
                    {% endfor %}

                </ul>
            </div>
            <div class="sidebar-left">
                {% partial 'site/recommend-posts' %}
            </div>
        </div>
    </div>
</article>